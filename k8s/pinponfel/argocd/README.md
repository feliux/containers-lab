# ArgoCD

## Configuration

Create argo namespace and apply manifest

~~~
$ kubectl create namespace argocd
$ kubectl apply -n argocd -f install.yaml  # https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
$ kubectl get po -n argocd
~~~

**Port Forwarding**

~~~
$ kubectl port-forward svc/argocd-server -n argocd 8080:443
~~~

In this case the service will be available on `localhost:8080`. Using vagrant you should forward with the following command

**Login**

[From official documentation](https://github.com/argoproj/argo-cd/blob/master/docs/getting_started.md)

Depending on the Argo CD version you are installing, the method how to get the initial password for the `admin` user is different.

> Argo CD 1.8 and earlier

The initial password is autogenerated to be the pod name of the Argo CD API server. This can be retrieved with the command

~~~
$ kubectl get pods -n argocd -l app.kubernetes.io/name=argocd-server -o name | cut -d'/' -f 2
~~~

> Argo CD v1.9 and later

The initial password for the `admin` account is auto-generated and stored as clear text in the field `password` in a secret named `argocd-initial-admin-secret` in your Argo CD installation namespace. You can simply retrieve this password using `kubectl`

~~~
$ kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d
~~~

For better readability, e.g. if you want to copy & paste the generated password, you can simply append `&& echo` to above command, which will add a newline to
the output.

!!! note
    You should delete the `argocd-initial-admin-secret` from the Argo CD
    namespace once you changed the password. The secret serves no other
    purpose than to store the initially generated password in clear and can
    safely be deleted at any time. It will be re-created on demand by Argo CD
    if a new admin password must be re-generated.

## References

[Argo CD](https://argoproj.github.io/argo-cd/)

[Argo CD getting started.](https://github.com/argoproj/argo-cd/blob/master/docs/getting_started.md)